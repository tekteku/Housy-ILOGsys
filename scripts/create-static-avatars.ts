import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

// Get the directory path
const __dirname = path.dirname(fileURLToPath(import.meta.url));

// Simple function to create a default avatar image
function createDefaultAvatar() {
    // Base64 encoded small PNG image (blue circle with user silhouette)
    const base64Image = `iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF6GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjUtMDUtMTNUMDc6MzA6MjErMDI6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI1LTA1LTEzVDA3OjMwOjQ5KzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI1LTA1LTEzVDA3OjMwOjQ5KzAyOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM4ZjA3YjM1LWUx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`;
    
    // Convert base64 string to a buffer
    const imageBuffer = Buffer.from(base64Image, 'base64');
    
    // Define file path
    const filePath = path.join(__dirname, '../../static/images/profiles/default.png');
    
    // Ensure directory exists
    const dir = path.dirname(filePath);
    if (!fs.existsSync(dir)) {
        fs.mkdirSync(dir, { recursive: true });
    }
    
    // Write the file
    fs.writeFileSync(filePath, imageBuffer);
    
    console.log(`Default avatar created at ${filePath}`);
}

// Run the function
createDefaultAvatar();
